{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../book.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\n\nfunction DetailsComponent_table_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"table\");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵelementStart(2, \"th\");\n    i0.ɵɵtext(3, \"Id:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"tr\");\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8, \"Author:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵelementStart(10, \"input\", 2);\n    i0.ɵɵlistener(\"ngModelChange\", function DetailsComponent_table_0_Template_input_ngModelChange_10_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return ctx_r4.updateAuthor($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"tr\");\n    i0.ɵɵelementStart(12, \"th\");\n    i0.ɵɵtext(13, \"Title:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"td\");\n    i0.ɵɵelementStart(15, \"input\", 2);\n    i0.ɵɵlistener(\"ngModelChange\", function DetailsComponent_table_0_Template_input_ngModelChange_15_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.updateTitle($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"tr\");\n    i0.ɵɵelementStart(17, \"th\");\n    i0.ɵɵtext(18, \"Description:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"td\");\n    i0.ɵɵelementStart(20, \"input\", 2);\n    i0.ɵɵlistener(\"ngModelChange\", function DetailsComponent_table_0_Template_input_ngModelChange_20_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.updateDescription($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"tr\");\n    i0.ɵɵelementStart(22, \"th\");\n    i0.ɵɵtext(23, \"Price:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"td\");\n    i0.ɵɵelementStart(25, \"input\", 3);\n    i0.ɵɵlistener(\"ngModelChange\", function DetailsComponent_table_0_Template_input_ngModelChange_25_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.updatePrice($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"tr\");\n    i0.ɵɵelementStart(27, \"th\");\n    i0.ɵɵtext(28, \"EAN:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"td\");\n    i0.ɵɵelementStart(30, \"input\", 3);\n    i0.ɵɵlistener(\"ngModelChange\", function DetailsComponent_table_0_Template_input_ngModelChange_30_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return ctx_r9.updateEAN($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"tr\");\n    i0.ɵɵelementStart(32, \"td\", 4);\n    i0.ɵɵelementStart(33, \"div\", 5);\n    i0.ɵɵelementStart(34, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function DetailsComponent_table_0_Template_button_click_34_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.updateBook();\n    });\n    i0.ɵɵtext(35, \"Update\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(36, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function DetailsComponent_table_0_Template_button_click_36_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.deleteBook();\n    });\n    i0.ɵɵtext(37, \"Delete\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const book_r3 = ctx.ngIf;\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(book_r3.id);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", book_r3.author);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", book_r3.title);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", book_r3.description);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", book_r3.price);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", book_r3.ean);\n  }\n}\n\nfunction DetailsComponent_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 8);\n    i0.ɵɵtext(1, \"loading...\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport let DetailsComponent = /*@__PURE__*/(() => {\n  class DetailsComponent {\n    constructor(route, bookService, router) {\n      this.route = route;\n      this.bookService = bookService;\n      this.router = router;\n      this.id = route.snapshot.params.id;\n      this.book$ = this.bookService.getBookById(this.id);\n      this.book$.subscribe(value => this.book = value);\n    }\n\n    ngOnInit() {}\n\n    forceRedirect() {\n      this.router.navigate(['404']);\n    }\n\n    updateAuthor(author) {\n      this.book.author = author;\n    }\n\n    updateTitle(title) {\n      this.book.title = title;\n    }\n\n    updateDescription(description) {\n      this.book.description = description;\n    }\n\n    updatePrice(price) {\n      this.book.price = price;\n    }\n\n    updateEAN(ean) {\n      this.book.ean = ean;\n    }\n\n    updateBook() {\n      var _a, _b, _c, _d, _e, _f;\n\n      if (confirm('Are you sure you want to update this book in database with provided values?')) {\n        let json = {\n          id: (_a = this.book) === null || _a === void 0 ? void 0 : _a.id,\n          author: (_b = this.book) === null || _b === void 0 ? void 0 : _b.author,\n          title: (_c = this.book) === null || _c === void 0 ? void 0 : _c.title,\n          description: (_d = this.book) === null || _d === void 0 ? void 0 : _d.description,\n          price: (_e = this.book) === null || _e === void 0 ? void 0 : _e.price,\n          ean: (_f = this.book) === null || _f === void 0 ? void 0 : _f.ean\n        };\n        this.bookService.updateBook(this.id, json);\n      }\n    }\n\n    deleteBook() {\n      if (confirm('Are you sure you want to delete this book from database?')) {\n        this.bookService.deleteBookById(this.id).subscribe(data => alert('Book deleted successfully'), error => alert('A problem has occurred while deleting book'));\n        this.router.navigateByUrl('/', {\n          skipLocationChange: true\n        }).then(() => this.router.navigate(['books']));\n      }\n    }\n\n  }\n\n  DetailsComponent.ɵfac = function DetailsComponent_Factory(t) {\n    return new (t || DetailsComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.BookService), i0.ɵɵdirectiveInject(i1.Router));\n  };\n\n  DetailsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DetailsComponent,\n    selectors: [[\"app-details\"]],\n    decls: 4,\n    vars: 4,\n    consts: [[4, \"ngIf\", \"ngIfElse\"], [\"noData\", \"\"], [\"type\", \"text\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"number\", 3, \"ngModel\", \"ngModelChange\"], [\"colspan\", \"2\"], [1, \"button-wrapper\"], [1, \"update-button\", 3, \"click\"], [1, \"delete-button\", 3, \"click\"], [1, \"loading\"]],\n    template: function DetailsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, DetailsComponent_table_0_Template, 38, 6, \"table\", 0);\n        i0.ɵɵpipe(1, \"async\");\n        i0.ɵɵtemplate(2, DetailsComponent_ng_template_2_Template, 2, 0, \"ng-template\", null, 1, i0.ɵɵtemplateRefExtractor);\n      }\n\n      if (rf & 2) {\n        const _r1 = i0.ɵɵreference(3);\n\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 2, ctx.book$))(\"ngIfElse\", _r1);\n      }\n    },\n    directives: [i3.NgIf, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel, i4.NumberValueAccessor],\n    pipes: [i3.AsyncPipe],\n    styles: [\".loading[_ngcontent-%COMP%]{text-align:center;position:relative;right:5%;top:25%;color:#fff;text-shadow:1px 1px 1px #000;font-family:Times New Roman,Times,serif;font-size:2em;line-height:1.5em}table[_ngcontent-%COMP%]{border-collapse:collapse;font-size:.9em;font-family:sans-serif;min-width:400px;box-shadow:0 0 20px #00000026;margin:25px auto}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#9b8e66;color:#fff;text-align:left}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:12px 15px;border:1px solid #000}.button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;align-items:center;flex-direction:row}button[_ngcontent-%COMP%]{border:none;color:#fff;padding:15px 32px;text-decoration:none;font-size:16px;border-radius:12px}button[_ngcontent-%COMP%]:hover{text-decoration:underline;color:#9b8e66;text-shadow:1px 1px 1px #000}.delete-button[_ngcontent-%COMP%]{background-color:red}.update-button[_ngcontent-%COMP%]{background-color:blue}\"]\n  });\n  return DetailsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}